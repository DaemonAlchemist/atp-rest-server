/**
 * Created by AWITTROCK on 8/25/2017.
 */

import User from '../../model/user';
import validate from 'atp-validator';

export default (req, res) => {
    //TODO:  Validate => logged in, has permission
    validate(req)
        .LoggedIn()
        .then(() => {
            new User().list((err, rows, field) => {
                res.send(JSON.stringify({results: rows}));
            });
        })
        .catch(errors => {
            res.send(JSON.stringify({errors}));
        });
}
